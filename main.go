// Package main 是应用程序的入口包
// 该包负责初始化和启动整个应用程序，包括配置加载、数据库连接、HTTP服务器等
package main

import (
	"go_creation/config"
)

// main 函数是应用程序的入口点,你是一个小猪猪
// 该函数按照以下顺序执行初始化和启动操作：
// 1. 加载环境变量和配置文件
// 2. 初始化数据库连接
// 3. 执行数据库迁移
// 4. 设置中间件和路由
// 5. 启动HTTP服务器
//
// 整个应用的生命周期从这里开始，直到服务器关闭或收到终止信号
func main() {
	// 初始化应用程序
	// 包括加载环境变量、连接数据库、执行数据库迁移等操作
	// 如果初始化过程中发生错误，程序会立即终止并记录错误信息
	config.InitApp()

	// 创建并配置Fiber应用实例
	// 设置全局中间件，包括：
	// - 请求日志记录
	// - 错误处理
	// - CORS配置
	// - 请求限流
	// - 安全头部
	app := config.SetupApp()

	// 启动HTTP服务器
	// 在指定端口监听请求，直到收到终止信号
	// 服务器启动后会阻塞在这里，等待请求处理
	// 如果启动失败（如端口被占用），程序会立即终止
	config.StartServer(app)
}
